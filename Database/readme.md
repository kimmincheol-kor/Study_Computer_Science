# Database
- 여러 사람이 공유하여 사용할 목적으로 체계화하여 통합, 관리하는 구조화된 데이터의 집합.
- 여러 응용 시스템들의 통합된 정보를 저장, 운영할 수 있는 공용 데이터들의 묶음.

데이터베이스?
--------
- 데이터베이스가 존재하기 이전에는 파일 시스템을 이용하여 데이터를 관리하였다.
   - 데이터 종속성, 중복성, 무결성의 문제가 발생한다. -> 데이터베이스를 사용하는 이유
- 데이터베이스는 반드시 관리 시스템(DataBase Management System, DBMS)과 함께 한다.
   - 데이터를 잘 다룰 수 있도록 도와주는 시스템.
   - 관계형은 RDBMS
- 데이터에 접근할때 DB에 직접 접근이 아닌 DBMS에 질의(Query)하며, 이를 위해 SQL이란 언어를 사용한다.

데이터베이스의 특징
--------
- 데이터의 `독립성`
   - 물리적 : 데이터베이스의 크기를 수정하더라도 응용 프로그램을 수정할 필요가 없다.
   - 논리적 : 다양한 응용 프로그램의 논리적 요구를 만족시켜줄 수 있다.
- 데이터의 `무결성`
   - 잘못된 데이터가 발생하는 경우의 수를 방지하는 기능으로 데이터의 유효성 검사를 이용한다.
- 데이터의 `보안성`
   - 인가된 사용자들만 데이터에 접근할 수 있도록 접근 권한을 설정한다.
- 데이터의 `일관성`
   - 연관된 데이터를 논리적인 구조로 관리하여 데이터의 불일치성을 배제한다.
- 데이터의 `중복 최소화`
   - 데이터를 통합해서 관리하기 때문에 자료의 중복을 해결한다.
   
데이터베이스 스키마
--------
- DB에서 데이터의 구조, 표현 방법, 데이터 간의 관계를 형식 언어로 정의한 구조
- 이용자가 보았을 때의 `논리 구조`와 컴퓨터가 보았을 때의 `물리 구조`에 대해 기술

- 데이터 전체의 구조를 정의한 `개념 스키마`
- 실제 이용자가 취급하는 데이터 구조를 정의한 `외부 스키마`
- 데이터 구조의 형식을 구체적으로 정의하는 `내부 스키마`

- 3단계 스키마 구조
   - 데이터를 바라보는 관점으로 각가을 분리.
   - 분리함으로써 '독립성'과 '중복의 배제'의 이점을 얻는다.
   <img src="http://www.databaser.net/moniwiki/pds/3_eb_8b_a8_ea_b3_84_ec_8a_a4_ed_82_a4_eb_a7_88_ea_b5_ac_ec_a1_b0/3%EB%8B%A8%EA%B3%84%EC%8A%A4%ED%82%A4%EB%A7%88%EA%B5%AC%EC%A1%B0.JPG"/>

관계형 데이터 모델
--------
- 관계 모델
   - `속성(Attribute)`의 집합 => `행(Tuple)`
   - 행의 집합 => `관계(Relation)`
   - 관계의 집합 => `DB`
   <img src="http://www.databaser.net/moniwiki/pds/_ea_b4_80_ea_b3_84_ed_98_95_eb_8d_b0_ec_9d_b4_ed_84_b0_eb_aa_a8_eb_8d_b8/r_model02.png"/>
   
- RDB
   - `컬럼(Columen)`의 집합 => `레코드(Record)`
   - 레코드의 집합 => `테이블(Table)`
   - 테이블의 집합 => `DB`
   
   + 관계와 제약 조건의 집합
      
 SQL
 --------
- DBMS에게 질의하기 위해 사용되는 특수 목적의 프로그래밍 언어이다.
- 데이터 조작 언어(DML), 데이터 정의 언어(DDL), 데이터 제어 언어(DCL)의 세 가지로 나뉜다.
   1. 데이터 정의 언어 : `테이블, 색인, 제약 조건 등`을 생성하거나 삭제, 수정하는 작업에 대한 언어
   2. 데이터 조작 언어 : DB에 대해 `데이터` 검색, 추가, 삭제, 갱신을 위한 언어
   3. 데이터 제어 언어 : 데이터에 대한 접근 권한을 제어하기 위한 언어
   
개체-관계 모델 (ERM)
--------
- DB를 잘 설계하는 것이 매우 중요하다.
- RDB에서는 데이터 구조화를 위해 ERM으로 모델링한다.
- 모델링의 산출물(다이어그램)을 ERD라고 한다.

정규화
--------
- RDB를 설계하다보면 데이터의 중복이 많아진다.
- 정규화를 통해 테이블들을 작게 나누어서 데이터의 중복을 없애고 잘 조직된 구조로 만든다.
- 단계적으로 정규화를 적용하여 제 1정규형 ,,, 제 6정규형까지 만들어진다.
- 과도한 정규화는 DB 질의 처리 속도를 떨어뜨리기 때문에 적절한 정규화가 필요하다.

- 제 1 정규형
   - 각 속성이 원자적이어야 한다.
   - 기본 키로 각 행을 식별할 수 있어야한다.
   - 중복되는 항목이 없어야한다.
   
- 제 2 정규형
   - 후보키 전체로 후보키에 속하지 않는 속성을 결정할 수 있어야 한다.

- 제 3 정규형
   - 모든 속성이 기본 키에 대해서만 의존되어야 한다.
   
트랜잭션
--------
- 하나의 논리적 작업 `단위` (여러 동작의 묶음, 조합) (송금은 출금, 입금이 동시에 동작한다)
- 트랜잭션의 주요 이슈 : 트랜잭션 실행 중 장애, 다수 트랜잭션 동시 실행
- 트랜잭션은 DB의 무결성을 지키기 위해 ACID 성질을 가진다.
   - 원자성 : 모든 연산이 적용되거나, 아무것도 적용되지 않아야한다.
   - 일치성 : 수행 전 무결한 상태였다면, 수행 후에도 무결한 상태여야 한다.
   - 고립성 : 여러 트랜잭션이 실행되고 있어도 사용자는 자신의 트랜잭션만 느껴야 한다.
   - 지속성 : 완료된 결과는 시스템 장애가 발생하더라도 반영되어야 한다.
- 트랜잭션의 상태
   - 수행 중, 부분 완료, 실패, 완료, 철회
   

색인(Index)이란 무엇인가?
--------
- 색인의 목적은 데이터를 빨리 찾기 위함이다.
- `인덱스 - 데이터 레코드`로 구성된다.
- 질의 종류에 따라 적절한 색인을 선택한다. 질의 (Exact match:특정 데이터, Range:특정범위 데이터)

- 색인의 종류
   - 정렬 색인(Ordered) : 키를 기준으로 정렬되어 있다.
   - 해쉬 색인(Hash) : 정렬되어 있지 않다.

   - 주 색인(Primary) : 실제 레코드 순서와 동일한 순서로 존재하는 색인 (단 하나)
   - 이차 색인(Secondary) : 레코드 순서와 상관 없이 키에 대해 정렬된 상태로 존재하는 색인 (여러개) (밀집 색인)

   - 밀집 색인(Dense) : 모든 레코드에 대한 색인 레코드가 존재
   - 희소 색인(Sparse) : 일부 레코드에 대해서만 색인 레코드가 존재 (정렬되어있을때만 의미가 있다.)

   - 다단계 색인(Multilevel) : 성능 등의 목적으로 사용

B+ 트리
--------
- 균형 트리 상태를 유지하는 자료 구조.
- 많은 상용 시스템에서 색인을 위한 자료 구조로 쓰인다.
- 데이터에 변화가 발생해도 지역적인 변화만 있으면 되기 때문에 색인 유지에 용이하다.
- 이진 트리와 다르게 자식 노드를 매우 많이 가지도록 만든다. -> 깊이를 작게하여 디스크 접근을 줄이기 위함.
- 단말 노드는 `실제 레코드를 가리키는 포인터`와 `다음 순서의 색인 노드를 가리키는 포인터`(Range 질의에 용이)를 가진다.
