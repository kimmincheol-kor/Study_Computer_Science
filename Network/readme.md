# Network

## OSI 7계층

<img src="https://github.com/kimmincheol-kor/tech-interview/blob/master/contents/images/osi-7-layer.png" width="60%"/>   

- OSI : Open Systems Interconnection reference model
   - 국제 표준화 기구에서 개발한 모델, `컴퓨터 네트워크 프로토콜 디자인과 통신`을 `계층`으로 나누어 설명한 것.
   - 각 계층은 하위 계층의 기능을 이용하고, 상위 계층에게 기능을 제공한다.
   - `프로토콜 스택` 혹은 `스택`이란 이런 계층들로 구성되는 프로토콜 시스템이 구현된 것이다.
   
1. 물리 계층 (Physical Layer)
   - 기본 네트워크 하드웨어 전송 기술(LAN)을 이루는 계층.
   - 전송 단위 : `Bit`
   
2. 데이터 링크 계층 (Data Link Layer)
   - `신뢰성 있는 전송을 보장`하기 위한 계층.
   - 물리적인 주소 값(MAC)으로 신뢰성 보장. => 네트워크 카드가 생산될 때 MAC Address가 정해진다.
   - 전송 단위 : `Frame`
   
3. 네트워크 계층 (Network Layer)
   - `IP주소로 경로를 찾아주는` 역할을 수행하는 계층.
   - 다양한 길이의 데이터를 전달하고, 전송 계층(상위 계층)이 요구하는 서비스 품질을 제공하기 위한 기능적, 절차적 수단을 제공한다.
   - 라우팅 , 흐름 제어, 세그멘테이션, 오류 제어, 인터네트워킹 등을 수행한다.
   - 논리적인 주소 구조(IP)를 가지며 계층적이다.
   - 전송 단위 : `Packet`
   
4. 전송 계층 (Transport Layer)
   - 사용자들간의 `신뢰성 있는 데이터 통신`을 담당하는 계층.
   - 포트 번호가 중요하게 사용된다.
   - 대표적인 프로토콜로는 TCP, UDP가 있다.
   - 전송 단위 : `Segment`

5. 세션 계층 (Session Layer)
   - 양 끝단의 `응용 프로세스간 의 통신을 관리`하는 계층.
   - 동기화를 제공 : 송신측, 수신측의 시간과 통신 규격을 동기화한다.
   - 컴퓨터가 통신을 하기 위해서는 세션(TCP/IP)이 필요한데 이 계층에서 만들고 없앤다.
   - 연결 성립 -> 제어와 운영 -> 연결 종료

6. 표현 계층 (Presentation Layer)
   - 응용 계층간에 전송하는 `데이터의 표현을 규정`하는 계층.
   - 데이터를 압축, 암호화, 변환 등의 작업을 통해 서로 다른 환경의 컴퓨터들이 Data를 이해할 수 있도록 해준다.

7. 응용 계층 (Application Layer)
   - `사용자와 응용 프로그램 간에 데이터 교환`을 가능하게 하는 계층.
   - 사용자 어플리케이션과 직접 관계되어 응용 서비스를 수행한다.
   - 웹 브라우저, HTTP, WWW, Telnet 등의 사용자와 상호작용하는 응용 프로그램들이 속한다. 
   
## TCP와 UDP

- TCP : 연결형 통신 프로토콜
   1. 세그먼트 방식으로 처리
   2. 데이터 흐름 제어, 혼잡 제어 => 높은 신뢰성 보장
   3. 체계적인 전송으로 인해 UDP보다 느리다.
   4. IP를 같이 사용하여 목적지 확인

- UDP : 비연결형 통신 프로토콜
   1. 데이터그램 방식으로 처리
   2. 체계적인 전송 X => 속도 향상, 신뢰성이 낮다.
   3. 빠른 반응 속도가 필요한 서비스, 게임, 전화 에서 사용
   4. 파일전송에 사용 X
   5. UDP Header의 CheckSum 필드만을 사용하여 최소한의 오류만 검출한다.

=> TCP와 UDP는 각 각의 포트 주소 공간을 관리하기 때문에 포트 번호가 같아도 충돌하지 않는다.
 
## HTTP와 HTTPS

- HTTP : HyperText Transfer Protocol
   - 웹 상에서 클라이언트와 서버 간에 요청/응답 메세지를 주고 받을 수 있는 프로토콜
   - TCP 또는 UDP 의 80번 포트를 사용한다.
   - 비연결(Connectionless) : 클라이언트가 요청을 보내고 서버가 응답을 보내면 바로 연결이 끊긴다.
   - 무상태(Stateless) : 연결이 끊어지는 순간 통신은 끝나며 상태 정보를 유지하지 않는다.
   
   - 문제점
      - HTTP 는 평문 통신이기 때문에 도청이 가능하다.
      - 통신 상대를 확인하지 않기 때문에 위장이 가능하다.
      - 완전성을 증명할 수 없기 때문에 변조가 가능하다.

- HTTPS : HTTP over Secure socker layer
   - HTTP의 보안이 강화된 버전의 프로토콜
   - TCP 포트로 443포트를 사용한다.
   - 소켓 통신에서 일반 테스트를 이용하는 대신에, SSL이나 TLS 프로토콜을 통해 `세션 데이터를 암호화`한다.
   - 암호화/복호화하는 과정에서 부하가 생길 수 있다.

## 쿠키와 세션

- 쿠키와 세션의 필요성
   1. HTTP 프로토콜은 위와 같은 특징으로 모든 요청 간 의존관계가 없다.
   2. 즉, 현재 접속한 사용자가 이전에 접속했던 사용자와 같은 사용자인지 아닌지 알 수 있는 방법이 없다.
   3. 계속해서 연결을 유지하지 않기 때문에 리소스 낭비가 줄어드는 것이 큰 장점이지만, 통신할 때마다 새로 연결하기 때문에 클라이언트는 매 요청마다 인증을 해야 한다는 단점이 있다.   
      <br>
   - 이전 요청과 현재 요청이 같은 사용자의 요청인지 알기 위해서는 `상태를 유지해야 한다.`
   - HTTP 프로토콜에서 상태를 유지하기 위한 기술로 쿠키와 세션이 있다.
   
#### 쿠키
- 쿠키의 개념
   - 클라이언트 로컬에 저장되는 Key-Value로 저장되는 파일.
   - 클라이언트 상태 정보를 브라우저에 저장하여 참고한다.

- 쿠키의 구성 요소
   - Key
   - Value
   - Expires
   - Domain
   - Path
   - Secure
   - HttpOnly
   
- 쿠키의 동작 방식
   - 서버가 HTTP 응답 메세지 헤더(Set-Cookie)에 쿠키를 포함하여 전송한다.
   - 클라이언트는 다음 요청 메세지에 브라우저에 저장된 쿠키를 포함하여 전송한다.
   - 서버에서는 요청 메세지에서 쿠키를 읽어 상태 정보를 확인한다.

#### 세션
- 세션의 개념
   - 일정 시간 동안 같은 Client로 부터 전송된 요청을 하나의 상태로 보고, 그 상태를 유지하는 기술.
   - 웹 브라우저와의 통신이 끊길 때 까지 유지되는 상태 정보.
   - 쿠키에 비해 보안성이 우수하다. => 느리다.
   
- 세션의 동작 방식
   - 서버가 Client에 유일한 ID (Session ID)를 HTTP 응답 메세지 헤더(Set-Cookie: JSESSIONID)에 포함하여 전송한다.
   - Client는 이후 연결이 끊기기 전까지 Session ID가 담긴 쿠키를 요청 메세지 헤더(Cookie : JSESSIONID)에 담아서 전송
   - 서버에서는 세션 ID를 확인하여 해당 세션과 관련된 정보를 확인한다.
   - 즉, 쿠키를 이용하여 상태 정보를 확인한다.

## REST, RESTful
#### REST

- REST란?
   - "Representational State Transfer(대표적인 상태 전달)"의 약자
   - 소프트웨어 개발 아키텍처의 한 형식
   - 기존 웹의 기술과 HTTP 프로토콜을 활용하기 때문에 웹의 장점을 활용한다.
   - 구체적인 정의 : **HTTP URI(Uniform Resource Identifier)를 통해 자원(Resource)을 명시하고, HTTP Method(Post, Get, Put, Delete)를 통해 해당 자원에 대한 CRUD Operation을 적용하는 것을 의미한다.**
   - 자원 기반의 구조 설계에서 HTTP Method를 통해 자원을 처리하도록 설계된 아키텍처를 의미한다. 모든 자원에 고유한 HTTP URI를 부여한다.
   
- REST가 필요한 이유
   - 애플리케이션 불리 및 통합
   - 다양한 클라이언트의 등장
   - 최근의 서버 프로그램은 다양한 브라우저, 다양한 디바이스와도 통신할 수 있어야한다.
   
- REST의 구성 요소
   - 자원(Resource) : URI
      - 자원을 구별하는 ID로 HTTP URI를 사용한다.
   
   - 행위(Verb) : HTTP Method
      - HTTP 프로토콜의 Method를 그대로 사용한다.
   
   - 표현(Representation of Resource)
      - 클라이언트가 자원에 대한 행위를 요청하면 서버는 적절한 응답을 보낸다.
      
- REST의 특징
   - Server-Client(서버-클라이언트 구조)
   - Stateless(무상태)
   - Cacheable(캐시 처리 가능)
   - Layered System(계층화)
   - Code-On-Demand(optional)
   - Uniform Interface(인터페이스 일관성)
   
- REST API
   - REST API란?
      - REST를 기반으로 서비스 API를 구현한 것.
      - OpenAPI나 마이크로서비스를 제공하는 업체 대부분은 REST API를 제공한다.
      - 웹 통신에서의 표준 API
      
#### RESTful
- RESTful이란?
   - REST 아키텍처를 구현한 웹 서비스를 나타내는 용어이다.
   - REST를 REST답게 쓰기 위한 방법
   
- RESTful의 목적
   - 퍼포먼스 향상이 목적이 아닌, 일관적인 컨벤션을 통한 API의 이해도 및 호환성을 높이는 것.
   

## Socket

#### Web Socket
- 웹 페이지의 한계에서 벗어나 실시간으로 상호작용하는 웹 서비스를 만드는 `표준 기술`

- 만들어진 배경
   - HTTP 프로토콜은 클라이언트 -> 서버의 단방향 통신을 위해 만들어진 방법이다.
   - 양방향 통신을 위해 HTML5 표준의 일부로 WebSocket이 만들어지게 되었다.
   
- 특징
   - 소켓을 이용하여 자유롭게 데이터를 주고 받을 수 있다.
   - 기존의 요청-응답 관계 방식보다 더 쉽게 데이터를 교환할 수 있다.
   - 다른 HTTP Request와 마찬가지로 80포트를 통해 웹 서버에 연결한다.
   - http:// 대신 ws:// 로 시작하며 Streaming과 유사한 방식으로 푸쉬를 지원한다.
   - 클라이언트인 브라우저와 마찬가지로 웹 서버도 WebSocket 기능을 지원해야 한다.
   - 현재 실제 서비스에 적용할만한 기술이 아니다.
   
#### Socket.io
- 다양한 방식의 실시간 웹 기술을 손쉽게 사용할 수 있는 `모듈`
- JavaScript를 이용하여 브라우저 종류에 상관없이 실시간 웹을 구현할 수 있도록한 기술이다.   

- 특징
   - 현재 바로 사용할 수 있는 기술이다.   
   - WebSocket을 지원하지 않는 어느 브라우저, 디바이스라도 푸쉬 메세지를 일관된 모듈로 보낼 수 있다.

